# The identifier Backend is internal to nginx, and used to name this specific upstream
upstream backend {
    # service-backend is the internal DNS name used by the backend Service inside Kubernetes
    server service-backend:3001;
}

server {
    listen 3000;
    server_name $your-dns:$your-port;

    root /usr/share/nginx/html;
    index index.html;

    location / {
        try_files $uri /index.html;
    }

    location /api {
        if ($request_method = POST ) {
            proxy_pass http://backend;
        }
        if ($request_method = DELETE ) {
            proxy_pass http://backend;
        }
        # The following statement will proxy traffic to the upstream named Backend
        # proxy_pass http://backend;
    }
}